# App Resources trong Android

## Giới thiệu

**App Resources** (Tài nguyên ứng dụng) là các tệp bổ sung và nội dung tĩnh mà ứng dụng Android của bạn sử dụng, chẳng hạn như hình ảnh, chuỗi văn bản, bố cục giao diện, màu sắc, kiểu dáng, v.v. Việc tách biệt tài nguyên khỏi mã nguồn giúp:

- **Dễ dàng bảo trì**: Thay đổi giao diện mà không cần sửa code
- **Hỗ trợ đa ngôn ngữ**: Dễ dàng dịch ứng dụng sang nhiều ngôn ngữ
- **Tương thích đa thiết bị**: Cung cấp tài nguyên khác nhau cho các kích thước màn hình, độ phân giải khác nhau
- **Tổ chức code tốt hơn**: Phân tách rõ ràng giữa logic và giao diện

---

## 1. App Res Folder (Thư mục res)

### 1.1. Tổng quan

Thư mục `res` (viết tắt của "resources") là nơi chứa tất cả các tài nguyên của ứng dụng Android. Thư mục này nằm trong đường dẫn:

```
app/
└── src/
    └── main/
        └── res/
            ├── drawable/
            ├── layout/
            ├── mipmap/
            ├── values/
            └── ...
```

### 1.2. Cấu trúc thư mục res

| Thư mục | Mô tả |
|---------|-------|
| `drawable/` | Chứa hình ảnh và các drawable resources |
| `layout/` | Chứa các file XML định nghĩa giao diện |
| `mipmap/` | Chứa icon launcher của ứng dụng |
| `values/` | Chứa các giá trị như strings, colors, styles |
| `menu/` | Chứa các file XML định nghĩa menu |
| `raw/` | Chứa các file thô (audio, video, etc.) |
| `xml/` | Chứa các file XML cấu hình |
| `font/` | Chứa các file font chữ |
| `anim/` | Chứa các animation XML |

### 1.3. Truy cập tài nguyên trong code

Tất cả tài nguyên trong thư mục `res` được tự động tạo ID trong class `R` (Resources). Bạn có thể truy cập chúng như sau:

**Trong Kotlin/Java:**
```kotlin
// Truy cập string
val appName = getString(R.string.app_name)

// Truy cập color
val primaryColor = getColor(R.color.primary)

// Truy cập drawable
val icon = getDrawable(R.drawable.ic_launcher)

// Truy cập layout
setContentView(R.layout.activity_main)
```

**Trong XML:**
```xml
<!-- Tham chiếu đến string -->
android:text="@string/app_name"

<!-- Tham chiếu đến color -->
android:textColor="@color/primary"

<!-- Tham chiếu đến drawable -->
android:src="@drawable/icon"
```

### 1.4. Resource Qualifiers (Bộ định danh tài nguyên)

Android hỗ trợ tạo các phiên bản tài nguyên khác nhau cho các cấu hình thiết bị khác nhau:

```
res/
├── drawable/           # Drawable mặc định
├── drawable-hdpi/      # Drawable cho màn hình hdpi
├── drawable-xhdpi/     # Drawable cho màn hình xhdpi
├── drawable-xxhdpi/    # Drawable cho màn hình xxhdpi
├── values/             # Giá trị mặc định
├── values-vi/          # Giá trị cho tiếng Việt
├── values-en/          # Giá trị cho tiếng Anh
├── layout/             # Layout mặc định
├── layout-land/        # Layout cho chế độ ngang
└── layout-sw600dp/     # Layout cho tablet (>= 600dp)
```

---

## 2. Drawables

### 2.1. Drawable là gì?

**Drawable** là một khái niệm trừu tượng trong Android đại diện cho "thứ gì đó có thể vẽ được". Nó có thể là:

- Hình ảnh bitmap (PNG, JPG, GIF, WebP)
- Hình ảnh vector (SVG → Vector Drawable)
- Shape drawable (hình dạng được định nghĩa bằng XML)
- Layer drawable (nhiều lớp drawable chồng lên nhau)
- State list drawable (drawable thay đổi theo trạng thái)

### 2.2. Các loại Drawable

#### a) Bitmap Drawable

Đây là hình ảnh thông thường (PNG, JPG, WebP):

```
res/
└── drawable/
    ├── background.png
    ├── icon.jpg
    └── banner.webp
```

Sử dụng trong XML:
```xml
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/background" />
```

#### b) Vector Drawable

Vector drawable là hình ảnh vector được định nghĩa bằng XML, có thể scale mà không bị vỡ:

```xml
<!-- res/drawable/ic_heart.xml -->
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    
    <path
        android:fillColor="#FF0000"
        android:pathData="M12,21.35l-1.45,-1.32C5.4,15.36 2,12.28 2,8.5 
                          2,5.42 4.42,3 7.5,3c1.74,0 3.41,0.81 4.5,2.09
                          C13.09,3.81 14.76,3 16.5,3 19.58,3 22,5.42 22,8.5
                          c0,3.78 -3.4,6.86 -8.55,11.54L12,21.35z"/>
</vector>
```

#### c) Shape Drawable

Tạo hình dạng đơn giản bằng XML:

```xml
<!-- res/drawable/rounded_button.xml -->
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    
    <!-- Màu nền -->
    <solid android:color="#6200EE" />
    
    <!-- Bo góc -->
    <corners android:radius="8dp" />
    
    <!-- Viền -->
    <stroke
        android:width="2dp"
        android:color="#3700B3" />
    
    <!-- Padding bên trong -->
    <padding
        android:left="16dp"
        android:top="8dp"
        android:right="16dp"
        android:bottom="8dp" />
    
    <!-- Gradient (tùy chọn) -->
    <gradient
        android:startColor="#6200EE"
        android:endColor="#3700B3"
        android:angle="45" />
</shape>
```

Các hình dạng có sẵn:
- `rectangle` - Hình chữ nhật
- `oval` - Hình elip/tròn
- `line` - Đường thẳng
- `ring` - Hình vòng

#### d) State List Drawable (Selector)

Drawable thay đổi theo trạng thái của View:

```xml
<!-- res/drawable/button_selector.xml -->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    
    <!-- Khi được nhấn -->
    <item android:state_pressed="true">
        <shape android:shape="rectangle">
            <solid android:color="#3700B3" />
            <corners android:radius="8dp" />
        </shape>
    </item>
    
    <!-- Khi bị vô hiệu hóa -->
    <item android:state_enabled="false">
        <shape android:shape="rectangle">
            <solid android:color="#CCCCCC" />
            <corners android:radius="8dp" />
        </shape>
    </item>
    
    <!-- Trạng thái mặc định -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#6200EE" />
            <corners android:radius="8dp" />
        </shape>
    </item>
</selector>
```

#### e) Layer List Drawable

Chồng nhiều drawable lên nhau:

```xml
<!-- res/drawable/layered_background.xml -->
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    
    <!-- Lớp nền -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="#FFFFFF" />
        </shape>
    </item>
    
    <!-- Lớp viền dưới -->
    <item android:top="2dp">
        <shape android:shape="rectangle">
            <solid android:color="#E0E0E0" />
        </shape>
    </item>
</layer-list>
```

### 2.3. Density Qualifiers cho Drawable

Để hỗ trợ nhiều độ phân giải màn hình, tạo các phiên bản drawable với kích thước khác nhau:

| Density | Thư mục | Tỷ lệ | Ví dụ (icon 48dp) |
|---------|---------|-------|-------------------|
| mdpi | `drawable-mdpi/` | 1x | 48 × 48 px |
| hdpi | `drawable-hdpi/` | 1.5x | 72 × 72 px |
| xhdpi | `drawable-xhdpi/` | 2x | 96 × 96 px |
| xxhdpi | `drawable-xxhdpi/` | 3x | 144 × 144 px |
| xxxhdpi | `drawable-xxxhdpi/` | 4x | 192 × 192 px |

---

## 3. Layout Folder (Thư mục Layout)

### 3.1. Tổng quan

Thư mục `layout/` chứa các file XML định nghĩa giao diện người dùng của ứng dụng. Mỗi file layout đại diện cho một màn hình hoặc một phần của màn hình.

```
res/
└── layout/
    ├── activity_main.xml
    ├── activity_detail.xml
    ├── fragment_home.xml
    ├── item_list.xml
    └── dialog_confirm.xml
```

### 3.2. Quy tắc đặt tên Layout

Theo convention, tên file layout nên tuân theo format:

| Loại | Format | Ví dụ |
|------|--------|-------|
| Activity | `activity_<name>.xml` | `activity_main.xml` |
| Fragment | `fragment_<name>.xml` | `fragment_home.xml` |
| Dialog | `dialog_<name>.xml` | `dialog_confirm.xml` |
| List Item | `item_<name>.xml` | `item_product.xml` |
| Partial/Include | `partial_<name>.xml` | `partial_header.xml` |

### 3.3. Cấu trúc cơ bản của Layout XML

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!" />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click Me" />

</LinearLayout>
```

### 3.4. Các thuộc tính quan trọng

#### a) layout_width và layout_height

```xml
<!-- Kích thước cố định -->
android:layout_width="100dp"
android:layout_height="50dp"

<!-- Vừa đủ với nội dung -->
android:layout_width="wrap_content"
android:layout_height="wrap_content"

<!-- Chiếm toàn bộ không gian có sẵn -->
android:layout_width="match_parent"
android:layout_height="match_parent"

<!-- Kích thước = 0, dùng với constraint hoặc weight -->
android:layout_width="0dp"
android:layout_height="0dp"
```

#### b) ID

```xml
<!-- Tạo ID mới -->
android:id="@+id/myButton"

<!-- Tham chiếu đến ID đã có -->
android:layout_below="@id/myTextView"
```

#### c) Margin và Padding

```xml
<!-- Margin: khoảng cách bên ngoài -->
android:layout_margin="16dp"
android:layout_marginStart="8dp"
android:layout_marginTop="8dp"
android:layout_marginEnd="8dp"
android:layout_marginBottom="8dp"

<!-- Padding: khoảng cách bên trong -->
android:padding="16dp"
android:paddingStart="8dp"
android:paddingTop="8dp"
android:paddingEnd="8dp"
android:paddingBottom="8dp"
```

### 3.5. Layout Qualifiers

Tạo layout cho các cấu hình thiết bị khác nhau:

```
res/
├── layout/                 # Layout mặc định (portrait)
├── layout-land/            # Layout cho chế độ ngang
├── layout-sw600dp/         # Layout cho tablet nhỏ
├── layout-sw720dp/         # Layout cho tablet lớn
├── layout-w600dp/          # Layout khi chiều rộng >= 600dp
└── layout-h400dp/          # Layout khi chiều cao >= 400dp
```

### 3.6. Include và Merge

**Include** - Tái sử dụng layout:
```xml
<!-- main_activity.xml -->
<LinearLayout ...>
    <include layout="@layout/partial_header" />
    
    <!-- Nội dung khác -->
    
    <include layout="@layout/partial_footer" />
</LinearLayout>
```

**Merge** - Giảm độ sâu của view hierarchy:
```xml
<!-- partial_buttons.xml -->
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <Button android:id="@+id/btn1" ... />
    <Button android:id="@+id/btn2" ... />
</merge>
```

### 3.7. Sử dụng Layout trong Code

**Kotlin:**
```kotlin
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        // Truy cập view bằng findViewById
        val button = findViewById<Button>(R.id.myButton)
        
        // Hoặc sử dụng View Binding
        // val binding = ActivityMainBinding.inflate(layoutInflater)
        // setContentView(binding.root)
        // binding.myButton.setOnClickListener { }
    }
}
```

---

## 4. Mipmap & XML Folders

### 4.1. Mipmap Folder

#### a) Mipmap là gì?

Thư mục `mipmap/` được thiết kế đặc biệt để chứa **icon launcher** của ứng dụng. Khác với `drawable/`, mipmap được tối ưu hóa cho việc hiển thị icon ở các kích thước khác nhau, đặc biệt khi launcher cần hiển thị icon lớn hơn density của thiết bị.

```
res/
├── mipmap-mdpi/
│   ├── ic_launcher.webp
│   └── ic_launcher_round.webp
├── mipmap-hdpi/
│   ├── ic_launcher.webp
│   └── ic_launcher_round.webp
├── mipmap-xhdpi/
│   ├── ic_launcher.webp
│   └── ic_launcher_round.webp
├── mipmap-xxhdpi/
│   ├── ic_launcher.webp
│   └── ic_launcher_round.webp
├── mipmap-xxxhdpi/
│   ├── ic_launcher.webp
│   └── ic_launcher_round.webp
└── mipmap-anydpi-v26/
    ├── ic_launcher.xml
    └── ic_launcher_round.xml
```

#### b) Tại sao dùng Mipmap thay vì Drawable cho Icon?

1. **Hiển thị chất lượng cao hơn**: Một số launcher có thể hiển thị icon lớn hơn density mặc định
2. **Không bị loại bỏ khi build APK cho specific density**: Drawable sẽ bị strip, mipmap thì không
3. **Tối ưu cho icon launcher**: Android xử lý mipmap khác với drawable để đảm bảo icon luôn sắc nét

#### c) Adaptive Icons (Android 8.0+)

```xml
<!-- res/mipmap-anydpi-v26/ic_launcher.xml -->
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Lớp nền -->
    <background android:drawable="@drawable/ic_launcher_background"/>
    <!-- Lớp trước -->
    <foreground android:drawable="@drawable/ic_launcher_foreground"/>
    <!-- Monochrome (Android 13+) -->
    <monochrome android:drawable="@drawable/ic_launcher_monochrome"/>
</adaptive-icon>
```

#### d) Kích thước Icon Launcher

| Density | Kích thước Icon |
|---------|-----------------|
| mdpi | 48 × 48 px |
| hdpi | 72 × 72 px |
| xhdpi | 96 × 96 px |
| xxhdpi | 144 × 144 px |
| xxxhdpi | 192 × 192 px |

#### e) Sử dụng Mipmap trong AndroidManifest

```xml
<application
    android:icon="@mipmap/ic_launcher"
    android:roundIcon="@mipmap/ic_launcher_round"
    ... >
```

### 4.2. XML Folder

#### a) XML Folder là gì?

Thư mục `xml/` chứa các file XML cấu hình tùy ý mà bạn có thể đọc trong runtime bằng `Resources.getXML()`. Thường được sử dụng cho:

- Cấu hình ứng dụng
- Data binding configurations
- Searchable configuration
- Network security configuration
- File paths cho FileProvider
- Widget configurations

```
res/
└── xml/
    ├── network_security_config.xml
    ├── file_paths.xml
    ├── searchable.xml
    └── backup_rules.xml
```

#### b) Ví dụ các file XML phổ biến

**Network Security Config:**
```xml
<!-- res/xml/network_security_config.xml -->
<network-security-config>
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">example.com</domain>
    </domain-config>
    
    <base-config cleartextTrafficPermitted="false">
        <trust-anchors>
            <certificates src="system" />
        </trust-anchors>
    </base-config>
</network-security-config>
```

Sử dụng trong AndroidManifest:
```xml
<application
    android:networkSecurityConfig="@xml/network_security_config"
    ... >
```

**File Paths cho FileProvider:**
```xml
<!-- res/xml/file_paths.xml -->
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <files-path name="my_files" path="." />
    <cache-path name="my_cache" path="." />
    <external-path name="my_external" path="." />
    <external-files-path name="my_external_files" path="." />
    <external-cache-path name="my_external_cache" path="." />
</paths>
```

**Searchable Configuration:**
```xml
<!-- res/xml/searchable.xml -->
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:searchSuggestAuthority="com.example.provider"
    android:searchSuggestIntentAction="android.intent.action.VIEW"
    android:includeInGlobalSearch="true">
</searchable>
```

**Backup Rules:**
```xml
<!-- res/xml/backup_rules.xml -->
<full-backup-content>
    <include domain="sharedpref" path="." />
    <exclude domain="database" path="secret.db" />
    <exclude domain="file" path="temp/" />
</full-backup-content>
```

---

## 5. Colors & Strings

### 5.1. Colors (Màu sắc)

#### a) Định nghĩa Colors

File `colors.xml` chứa tất cả các màu sắc sử dụng trong ứng dụng:

```xml
<!-- res/values/colors.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Primary Colors -->
    <color name="primary">#6200EE</color>
    <color name="primary_variant">#3700B3</color>
    <color name="on_primary">#FFFFFF</color>
    
    <!-- Secondary Colors -->
    <color name="secondary">#03DAC6</color>
    <color name="secondary_variant">#018786</color>
    <color name="on_secondary">#000000</color>
    
    <!-- Background Colors -->
    <color name="background">#FFFFFF</color>
    <color name="surface">#FFFFFF</color>
    <color name="error">#B00020</color>
    
    <!-- Text Colors -->
    <color name="text_primary">#212121</color>
    <color name="text_secondary">#757575</color>
    <color name="text_hint">#BDBDBD</color>
    
    <!-- Các màu khác -->
    <color name="divider">#E0E0E0</color>
    <color name="ripple">#1F000000</color>
    
    <!-- Màu với độ trong suốt (Alpha) -->
    <color name="black_50">#80000000</color>  <!-- 50% transparent black -->
    <color name="white_70">#B3FFFFFF</color>  <!-- 70% transparent white -->
</resources>
```

#### b) Format màu trong Android

| Format | Ví dụ | Mô tả |
|--------|-------|-------|
| `#RGB` | `#F00` | Red |
| `#RRGGBB` | `#FF0000` | Red |
| `#ARGB` | `#8F00` | 50% transparent Red |
| `#AARRGGBB` | `#80FF0000` | 50% transparent Red |

**Giá trị Alpha:**
- `00` = 0% (hoàn toàn trong suốt)
- `80` = 50%
- `FF` = 100% (không trong suốt)

#### c) Sử dụng Colors

**Trong XML:**
```xml
<TextView
    android:textColor="@color/text_primary"
    android:background="@color/background" />
```

**Trong Kotlin/Java:**
```kotlin
// Cách 1: getColor với context
val color = ContextCompat.getColor(context, R.color.primary)

// Cách 2: Resources
val color = resources.getColor(R.color.primary, theme)

// Áp dụng màu
textView.setTextColor(color)
view.setBackgroundColor(color)
```

#### d) Color State List

Định nghĩa màu thay đổi theo trạng thái:

```xml
<!-- res/color/button_text_color.xml -->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="@color/white" />
    <item android:state_enabled="false" android:color="@color/text_hint" />
    <item android:color="@color/primary" />
</selector>
```

### 5.2. Strings (Chuỗi văn bản)

#### a) Định nghĩa Strings

```xml
<!-- res/values/strings.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- App Name -->
    <string name="app_name">My Application</string>
    
    <!-- Common Strings -->
    <string name="ok">OK</string>
    <string name="cancel">Hủy</string>
    <string name="save">Lưu</string>
    <string name="delete">Xóa</string>
    <string name="edit">Sửa</string>
    <string name="search">Tìm kiếm</string>
    
    <!-- Messages -->
    <string name="welcome_message">Chào mừng bạn đến với ứng dụng!</string>
    <string name="error_network">Lỗi kết nối mạng. Vui lòng thử lại.</string>
    <string name="loading">Đang tải...</string>
    
    <!-- Formatted Strings -->
    <string name="greeting">Xin chào, %1$s!</string>
    <string name="items_count">Bạn có %1$d mục</string>
    <string name="price_format">Giá: %1$.2f VNĐ</string>
    
    <!-- Plurals -->
    <plurals name="numberOfItems">
        <item quantity="one">%d mục</item>
        <item quantity="other">%d mục</item>
    </plurals>
    
    <!-- String với HTML -->
    <string name="styled_text"><b>Bold</b> và <i>Italic</i></string>
    
    <!-- String Array -->
    <string-array name="planets">
        <item>Mercury</item>
        <item>Venus</item>
        <item>Earth</item>
        <item>Mars</item>
    </string-array>
</resources>
```

#### b) Ký tự đặc biệt trong Strings

```xml
<!-- Escape ký tự đặc biệt -->
<string name="apostrophe">It\'s working</string>
<string name="quotes">\"Hello World\"</string>
<string name="ampersand">&amp;</string>
<string name="less_than">&lt;</string>
<string name="greater_than">&gt;</string>

<!-- Xuống dòng -->
<string name="multiline">Dòng 1\nDòng 2\nDòng 3</string>

<!-- Giữ khoảng trắng -->
<string name="with_space">" Có khoảng trắng đầu và cuối "</string>
```

#### c) Sử dụng Strings

**Trong XML:**
```xml
<TextView
    android:text="@string/welcome_message" />

<EditText
    android:hint="@string/search" />
```

**Trong Kotlin/Java:**
```kotlin
// String đơn giản
val appName = getString(R.string.app_name)

// String với format
val greeting = getString(R.string.greeting, "Nguyễn Văn A")
val itemsCount = getString(R.string.items_count, 5)
val price = getString(R.string.price_format, 199000.0)

// Plurals
val items = resources.getQuantityString(R.plurals.numberOfItems, count, count)

// String Array
val planets = resources.getStringArray(R.array.planets)
```

#### d) Đa ngôn ngữ (Localization)

Tạo các phiên bản strings cho các ngôn ngữ khác nhau:

```
res/
├── values/
│   └── strings.xml          # Mặc định (tiếng Anh)
├── values-vi/
│   └── strings.xml          # Tiếng Việt
├── values-ja/
│   └── strings.xml          # Tiếng Nhật
└── values-zh-rCN/
    └── strings.xml          # Tiếng Trung giản thể
```

```xml
<!-- res/values/strings.xml (English - default) -->
<resources>
    <string name="hello">Hello</string>
    <string name="goodbye">Goodbye</string>
</resources>

<!-- res/values-vi/strings.xml (Vietnamese) -->
<resources>
    <string name="hello">Xin chào</string>
    <string name="goodbye">Tạm biệt</string>
</resources>
```

---

## 6. Styles & Themes

### 6.1. Style là gì?

**Style** là một tập hợp các thuộc tính định dạng có thể áp dụng cho một View hoặc một nhóm View. Style giúp:

- Tái sử dụng định dạng
- Duy trì tính nhất quán trong ứng dụng
- Dễ dàng thay đổi giao diện

### 6.2. Định nghĩa Style

```xml
<!-- res/values/styles.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Style cơ bản cho Button -->
    <style name="MyButton">
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">48dp</item>
        <item name="android:paddingStart">24dp</item>
        <item name="android:paddingEnd">24dp</item>
        <item name="android:textColor">@color/white</item>
        <item name="android:textSize">14sp</item>
        <item name="android:textAllCaps">true</item>
        <item name="android:background">@drawable/rounded_button</item>
    </style>
    
    <!-- Style kế thừa -->
    <style name="MyButton.Primary">
        <item name="android:backgroundTint">@color/primary</item>
    </style>
    
    <style name="MyButton.Secondary">
        <item name="android:backgroundTint">@color/secondary</item>
    </style>
    
    <!-- Style cho TextView -->
    <style name="TextAppearance.Title">
        <item name="android:textSize">24sp</item>
        <item name="android:textColor">@color/text_primary</item>
        <item name="android:textStyle">bold</item>
    </style>
    
    <style name="TextAppearance.Body">
        <item name="android:textSize">16sp</item>
        <item name="android:textColor">@color/text_secondary</item>
        <item name="android:lineSpacingMultiplier">1.2</item>
    </style>
    
    <!-- Style cho Card -->
    <style name="CardStyle">
        <item name="android:layout_margin">8dp</item>
        <item name="android:padding">16dp</item>
        <item name="android:background">@drawable/card_background</item>
        <item name="android:elevation">4dp</item>
    </style>

</resources>
```

### 6.3. Kế thừa Style

Có 2 cách kế thừa style:

```xml
<!-- Cách 1: Dùng dấu chấm (chỉ cho style do bạn định nghĩa) -->
<style name="MyButton.Large">
    <item name="android:textSize">18sp</item>
</style>

<!-- Cách 2: Dùng thuộc tính parent (cho mọi style) -->
<style name="MyLargeButton" parent="MyButton">
    <item name="android:textSize">18sp</item>
</style>

<!-- Kế thừa từ style của Android -->
<style name="CustomTextAppearance" parent="TextAppearance.AppCompat.Body1">
    <item name="android:textColor">@color/primary</item>
</style>
```

### 6.4. Sử dụng Style

```xml
<!-- Áp dụng style cho View -->
<Button
    style="@style/MyButton.Primary"
    android:text="Primary Button" />

<TextView
    style="@style/TextAppearance.Title"
    android:text="This is Title" />

<!-- Áp dụng textAppearance -->
<TextView
    android:textAppearance="@style/TextAppearance.Body"
    android:text="This is body text" />
```

### 6.5. Theme là gì?

**Theme** là một loại style đặc biệt được áp dụng cho toàn bộ Activity hoặc Application, thay vì chỉ một View đơn lẻ. Theme định nghĩa các thuộc tính toàn cục như:

- Màu primary, secondary
- Font chữ mặc định
- Style mặc định cho các widget
- Window attributes (status bar, navigation bar)

### 6.6. Định nghĩa Theme

```xml
<!-- res/values/themes.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- Theme Light -->
    <style name="Theme.MyApp" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <!-- Primary brand color -->
        <item name="colorPrimary">@color/primary</item>
        <item name="colorPrimaryVariant">@color/primary_variant</item>
        <item name="colorOnPrimary">@color/on_primary</item>
        
        <!-- Secondary brand color -->
        <item name="colorSecondary">@color/secondary</item>
        <item name="colorSecondaryVariant">@color/secondary_variant</item>
        <item name="colorOnSecondary">@color/on_secondary</item>
        
        <!-- Status bar color -->
        <item name="android:statusBarColor">?attr/colorPrimaryVariant</item>
        
        <!-- Background & Surface -->
        <item name="android:colorBackground">@color/background</item>
        <item name="colorSurface">@color/surface</item>
        <item name="colorError">@color/error</item>
        
        <!-- Default styles for widgets -->
        <item name="buttonStyle">@style/MyButton</item>
        <item name="textAppearanceBody1">@style/TextAppearance.Body</item>
    </style>
    
    <!-- Theme NoActionBar -->
    <style name="Theme.MyApp.NoActionBar">
        <item name="windowActionBar">false</item>
        <item name="windowNoTitle">true</item>
    </style>
    
    <!-- Theme cho Splash Screen -->
    <style name="Theme.MyApp.Splash" parent="Theme.SplashScreen">
        <item name="windowSplashScreenBackground">@color/primary</item>
        <item name="windowSplashScreenAnimatedIcon">@drawable/ic_launcher_foreground</item>
        <item name="postSplashScreenTheme">@style/Theme.MyApp</item>
    </style>

</resources>
```

### 6.7. Night Theme (Dark Mode)

```xml
<!-- res/values-night/themes.xml -->
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Theme.MyApp" parent="Theme.MaterialComponents.DayNight.DarkActionBar">
        <!-- Dark theme colors -->
        <item name="colorPrimary">@color/primary_dark</item>
        <item name="colorPrimaryVariant">@color/primary_variant_dark</item>
        <item name="colorOnPrimary">@color/on_primary_dark</item>
        
        <item name="android:colorBackground">@color/background_dark</item>
        <item name="colorSurface">@color/surface_dark</item>
    </style>

</resources>
```

### 6.8. Áp dụng Theme

**Trong AndroidManifest.xml:**
```xml
<!-- Áp dụng cho toàn app -->
<application
    android:theme="@style/Theme.MyApp"
    ... >
    
    <!-- Áp dụng cho Activity cụ thể -->
    <activity
        android:name=".SplashActivity"
        android:theme="@style/Theme.MyApp.Splash" />
        
    <activity
        android:name=".MainActivity"
        android:theme="@style/Theme.MyApp.NoActionBar" />
</application>
```

**Trong code:**
```kotlin
// Đặt theme trước setContentView
override fun onCreate(savedInstanceState: Bundle?) {
    setTheme(R.style.Theme_MyApp_NoActionBar)
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
}

// Chuyển đổi Dark/Light mode
AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES)  // Dark
AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO)   // Light
AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM)  // Theo hệ thống
```

### 6.9. Theme Attributes

Sử dụng theme attributes để tham chiếu đến giá trị trong theme:

```xml
<!-- Sử dụng ?attr/ để tham chiếu theme attribute -->
<View
    android:background="?attr/colorPrimary"
    android:textColor="?attr/colorOnPrimary" />

<!-- Tương đương với ?android:attr/ cho system attributes -->
<View
    android:background="?android:attr/selectableItemBackground" />
```

---

## 7. Menu

### 7.1. Menu là gì?

**Menu** trong Android là một thành phần UI cung cấp các tùy chọn hành động cho người dùng. Có ba loại menu chính:

1. **Options Menu**: Menu xuất hiện trên Action Bar/Toolbar
2. **Context Menu**: Menu xuất hiện khi nhấn giữ (long press) vào một View
3. **Popup Menu**: Menu popup tại một vị trí cụ thể

### 7.2. Thư mục Menu

```
res/
└── menu/
    ├── menu_main.xml
    ├── menu_detail.xml
    ├── menu_context.xml
    └── menu_popup.xml
```

### 7.3. Định nghĩa Menu XML

```xml
<!-- res/menu/menu_main.xml -->
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <!-- Menu item hiển thị trên Action Bar -->
    <item
        android:id="@+id/action_search"
        android:icon="@drawable/ic_search"
        android:title="@string/search"
        app:showAsAction="ifRoom"
        app:actionViewClass="androidx.appcompat.widget.SearchView" />

    <!-- Menu item luôn hiển thị -->
    <item
        android:id="@+id/action_cart"
        android:icon="@drawable/ic_cart"
        android:title="@string/cart"
        app:showAsAction="always" />

    <!-- Menu item trong overflow menu -->
    <item
        android:id="@+id/action_settings"
        android:icon="@drawable/ic_settings"
        android:title="@string/settings"
        app:showAsAction="never" />

    <item
        android:id="@+id/action_help"
        android:icon="@drawable/ic_help"
        android:title="@string/help"
        app:showAsAction="never" />

    <!-- Submenu -->
    <item
        android:id="@+id/action_sort"
        android:icon="@drawable/ic_sort"
        android:title="@string/sort"
        app:showAsAction="ifRoom">
        <menu>
            <item
                android:id="@+id/sort_by_name"
                android:title="@string/sort_by_name" />
            <item
                android:id="@+id/sort_by_date"
                android:title="@string/sort_by_date" />
            <item
                android:id="@+id/sort_by_price"
                android:title="@string/sort_by_price" />
        </menu>
    </item>

    <!-- Menu group -->
    <group android:id="@+id/group_view_options">
        <item
            android:id="@+id/view_list"
            android:title="@string/view_list"
            android:checkable="true" />
        <item
            android:id="@+id/view_grid"
            android:title="@string/view_grid"
            android:checkable="true" />
    </group>

</menu>
```

### 7.4. Thuộc tính showAsAction

| Giá trị | Mô tả |
|---------|-------|
| `always` | Luôn hiển thị trên Action Bar |
| `ifRoom` | Hiển thị nếu có đủ không gian |
| `never` | Luôn ẩn trong overflow menu |
| `withText` | Hiển thị kèm text bên cạnh icon |
| `collapseActionView` | Thu gọn thành action view (cho SearchView) |

### 7.5. Options Menu trong Activity

```kotlin
class MainActivity : AppCompatActivity() {

    // Inflate menu
    override fun onCreateOptionsMenu(menu: Menu): Boolean {
        menuInflater.inflate(R.menu.menu_main, menu)
        
        // Tùy chỉnh SearchView
        val searchItem = menu.findItem(R.id.action_search)
        val searchView = searchItem.actionView as SearchView
        searchView.queryHint = getString(R.string.search_hint)
        searchView.setOnQueryTextListener(object : SearchView.OnQueryTextListener {
            override fun onQueryTextSubmit(query: String?): Boolean {
                // Xử lý tìm kiếm
                return true
            }
            override fun onQueryTextChange(newText: String?): Boolean {
                // Xử lý khi text thay đổi
                return true
            }
        })
        
        return true
    }

    // Xử lý khi click menu item
    override fun onOptionsItemSelected(item: MenuItem): Boolean {
        return when (item.itemId) {
            R.id.action_search -> {
                // Xử lý search
                true
            }
            R.id.action_cart -> {
                // Mở giỏ hàng
                openCart()
                true
            }
            R.id.action_settings -> {
                // Mở settings
                openSettings()
                true
            }
            R.id.sort_by_name -> {
                sortByName()
                true
            }
            R.id.sort_by_date -> {
                sortByDate()
                true
            }
            else -> super.onOptionsItemSelected(item)
        }
    }

    // Cập nhật menu động
    override fun onPrepareOptionsMenu(menu: Menu): Boolean {
        // Ẩn/hiện menu item dựa trên điều kiện
        menu.findItem(R.id.action_cart).isVisible = cartItemCount > 0
        
        // Cập nhật badge
        val cartItem = menu.findItem(R.id.action_cart)
        cartItem.title = "Cart ($cartItemCount)"
        
        return super.onPrepareOptionsMenu(menu)
    }
}
```

### 7.6. Context Menu

Context Menu xuất hiện khi người dùng nhấn giữ vào một View:

```kotlin
class MainActivity : AppCompatActivity() {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        // Đăng ký Context Menu cho View
        val listView = findViewById<ListView>(R.id.listView)
        registerForContextMenu(listView)
    }

    // Tạo Context Menu
    override fun onCreateContextMenu(
        menu: ContextMenu,
        v: View,
        menuInfo: ContextMenu.ContextMenuInfo?
    ) {
        super.onCreateContextMenu(menu, v, menuInfo)
        menuInflater.inflate(R.menu.menu_context, menu)
        menu.setHeaderTitle("Chọn hành động")
    }

    // Xử lý click Context Menu
    override fun onContextItemSelected(item: MenuItem): Boolean {
        val info = item.menuInfo as AdapterView.AdapterContextMenuInfo
        val position = info.position
        
        return when (item.itemId) {
            R.id.context_edit -> {
                editItem(position)
                true
            }
            R.id.context_delete -> {
                deleteItem(position)
                true
            }
            R.id.context_share -> {
                shareItem(position)
                true
            }
            else -> super.onContextItemSelected(item)
        }
    }
}
```

```xml
<!-- res/menu/menu_context.xml -->
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/context_edit"
        android:icon="@drawable/ic_edit"
        android:title="@string/edit" />
    <item
        android:id="@+id/context_delete"
        android:icon="@drawable/ic_delete"
        android:title="@string/delete" />
    <item
        android:id="@+id/context_share"
        android:icon="@drawable/ic_share"
        android:title="@string/share" />
</menu>
```

### 7.7. Popup Menu

Popup Menu hiển thị tại một vị trí cụ thể khi click vào một View:

```kotlin
fun showPopupMenu(view: View) {
    val popup = PopupMenu(this, view)
    popup.menuInflater.inflate(R.menu.menu_popup, popup.menu)
    
    // Hiển thị icon (nếu có)
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
        popup.setForceShowIcon(true)
    }
    
    popup.setOnMenuItemClickListener { item ->
        when (item.itemId) {
            R.id.popup_copy -> {
                copyToClipboard()
                true
            }
            R.id.popup_paste -> {
                pasteFromClipboard()
                true
            }
            R.id.popup_delete -> {
                deleteSelected()
                true
            }
            else -> false
        }
    }
    
    popup.show()
}
```

```xml
<!-- res/menu/menu_popup.xml -->
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/popup_copy"
        android:icon="@drawable/ic_copy"
        android:title="Copy" />
    <item
        android:id="@+id/popup_paste"
        android:icon="@drawable/ic_paste"
        android:title="Paste" />
    <item
        android:id="@+id/popup_delete"
        android:icon="@drawable/ic_delete"
        android:title="Delete" />
</menu>
```

### 7.8. Navigation Drawer Menu

Menu cho Navigation Drawer:

```xml
<!-- res/menu/menu_drawer.xml -->
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <group android:checkableBehavior="single">
        <item
            android:id="@+id/nav_home"
            android:icon="@drawable/ic_home"
            android:title="@string/home" />
        <item
            android:id="@+id/nav_profile"
            android:icon="@drawable/ic_person"
            android:title="@string/profile" />
        <item
            android:id="@+id/nav_messages"
            android:icon="@drawable/ic_message"
            android:title="@string/messages" />
    </group>

    <item android:title="@string/other">
        <menu>
            <item
                android:id="@+id/nav_settings"
                android:icon="@drawable/ic_settings"
                android:title="@string/settings" />
            <item
                android:id="@+id/nav_help"
                android:icon="@drawable/ic_help"
                android:title="@string/help" />
            <item
                android:id="@+id/nav_logout"
                android:icon="@drawable/ic_logout"
                android:title="@string/logout" />
        </menu>
    </item>

</menu>
```

### 7.9. Bottom Navigation Menu

```xml
<!-- res/menu/menu_bottom_nav.xml -->
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/navigation_home"
        android:icon="@drawable/ic_home"
        android:title="@string/home" />
    <item
        android:id="@+id/navigation_search"
        android:icon="@drawable/ic_search"
        android:title="@string/search" />
    <item
        android:id="@+id/navigation_favorites"
        android:icon="@drawable/ic_favorite"
        android:title="@string/favorites" />
    <item
        android:id="@+id/navigation_profile"
        android:icon="@drawable/ic_person"
        android:title="@string/profile" />
</menu>
```

Sử dụng trong layout:
```xml
<com.google.android.material.bottomnavigation.BottomNavigationView
    android:id="@+id/bottom_navigation"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    app:menu="@menu/menu_bottom_nav" />
```

---

## Tổng kết

| Thư mục | Mục đích | Ví dụ |
|---------|----------|-------|
| `drawable/` | Hình ảnh, shapes, selectors | PNG, Vector, Shape XML |
| `layout/` | Giao diện người dùng | activity_main.xml |
| `mipmap/` | Icon launcher | ic_launcher.webp |
| `values/` | Strings, colors, styles, themes | strings.xml, colors.xml |
| `menu/` | Định nghĩa menu | menu_main.xml |
| `xml/` | Cấu hình tùy chỉnh | network_security_config.xml |
| `raw/` | File thô | audio.mp3, video.mp4 |
| `font/` | Font chữ | roboto.ttf |
| `anim/` | Animation | fade_in.xml |

### Best Practices

1. **Đặt tên có ý nghĩa**: Sử dụng naming convention nhất quán
2. **Sử dụng Resource Qualifiers**: Hỗ trợ đa ngôn ngữ, đa kích thước màn hình
3. **Tránh hardcode**: Luôn đặt strings, colors, dimensions trong resources
4. **Tối ưu hình ảnh**: Sử dụng WebP, Vector Drawable khi có thể
5. **Tổ chức styles/themes**: Kế thừa và tái sử dụng styles
6. **Sử dụng theme attributes**: Dùng `?attr/` thay vì hardcode colors

