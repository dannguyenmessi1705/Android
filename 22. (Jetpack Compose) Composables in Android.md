# (Jetpack Compose) Composables in Android

Tài liệu này dành cho người mới bắt đầu, dựa trên đúng project hiện tại trong repo này.

## 1) Tổng quan project và thư viện đang dùng

Theo cấu hình hiện tại:

- `Kotlin`: `2.3.10`
- `Android Gradle Plugin`: `8.13.2`
- `compileSdk/targetSdk`: `36`
- `minSdk`: `24`
- `Jetpack Compose BOM`: `2026.02.00`
- Thư viện chính gồm:
- `androidx.activity:activity-compose`
- `androidx.compose.ui:ui`
- `androidx.compose.ui:ui-graphics`
- `androidx.compose.ui:ui-tooling-preview`
- `androidx.compose.material3:material3`

Project đã bật Compose trong `app/build.gradle.kts`:

```kotlin
buildFeatures {
    compose = true
}
```

## 2) Composable là gì?

`Composable` là hàm Kotlin được đánh dấu bằng `@Composable`, dùng để mô tả UI theo kiểu khai báo (declarative).

Ví dụ đơn giản:

```kotlin
@Composable
fun Greeting(name: String) {
    Text(text = "Hello $name")
}
```

## 3) Text

### 3.1 Dùng `Text` cơ bản

```kotlin
Text(text = "Xin chào Jetpack Compose")
```

### 3.2 Tùy biến `Text`

Trong project đang dùng các thuộc tính như màu chữ, cỡ chữ, kiểu chữ, căn lề, gạch chân/gạch ngang:

```kotlin
Text(
    text = "Hello Android!",
    color = Color.Red,
    fontSize = 16.sp,
    fontStyle = FontStyle.Italic,
    fontFamily = FontFamily.Cursive,
    textAlign = TextAlign.Center,
    textDecoration = TextDecoration.Underline
)
```

### 3.3 Lưu ý cho người mới

- `TextAlign` chỉ thấy rõ khi composable có không gian đủ rộng.
- Ưu tiên style từ `MaterialTheme.typography` để đồng bộ toàn app.
- Không hard-code quá nhiều style lặp lại, hãy tách thành hàm hoặc style dùng chung.

## 4) Layouts

Compose cung cấp các layout nền tảng:

- `Column`: xếp dọc
- `Row`: xếp ngang
- `Box`: chồng lớp

Ví dụ:

```kotlin
Column(
    modifier = Modifier.fillMaxSize().padding(16.dp)
) {
    Text("Tiêu đề")
    Row {
        Text("Mục 1")
        Text("Mục 2")
    }
    Box {
        Text("Lớp dưới")
        Text("Lớp trên")
    }
}
```

### 4.1 Khi nào dùng layout nào?

- Dùng `Column` cho form, danh sách dọc đơn giản.
- Dùng `Row` cho các thành phần nằm cạnh nhau (icon + text).
- Dùng `Box` khi cần đè/chồng view (badge, overlay, watermark).

## 5) Paddings & Margins

### 5.1 Điểm quan trọng: Compose không có `margin` trực tiếp

Trong XML View truyền thống có `padding` và `margin`.  
Trong Compose:

- `padding` có sẵn qua `Modifier.padding(...)`
- `margin` không có API riêng; thường mô phỏng bằng `Spacer(...)`, `Arrangement.spacedBy(...)`, `contentPadding` (với `LazyColumn`, `LazyRow`) hoặc thêm `padding` từ composable cha.

### 5.2 Ví dụ padding

```kotlin
Text(
    text = "Nội dung",
    modifier = Modifier.padding(start = 16.dp, top = 8.dp)
)
```

### 5.3 Ví dụ thay margin bằng `Spacer`

```kotlin
Column {
    Text("Dòng 1")
    Spacer(modifier = Modifier.height(12.dp))
    Text("Dòng 2")
}
```

## 6) Image Composable

Trong project có ảnh `app/src/main/res/drawable/electronics.png`, và đang hiển thị bằng `Image + painterResource`.

Ví dụ:

```kotlin
val painter = painterResource(R.drawable.electronics)
Image(
    painter = painter,
    contentDescription = "Electronics Image",
    modifier = Modifier.padding(16.dp)
)
```

### 6.1 Best practices

- Luôn có `contentDescription` (trừ ảnh trang trí thuần túy có thể để `null`).
- Dùng `contentScale` khi cần fit/crop ảnh, ví dụ `ContentScale.Crop`, `ContentScale.Fit`, `ContentScale.FillWidth`.
- Ảnh từ internet: nên dùng thư viện tải ảnh (ví dụ Coil Compose) để cache và xử lý lifecycle tốt hơn.

## 7) Button Composable

`Button` là nút chuẩn Material, cần `onClick`.

```kotlin
Button(onClick = { /* xử lý click */ }) {
    Text("Button")
}
```

Trong code project, click đang được log bằng:

```kotlin
Log.d("TextCompose", "Button clicked!")
```

## 8) Types of Buttons (Material 3)

Project hiện đã dùng đầy đủ 5 loại:

- `Button`: nút chính (primary action)
- `FilledTonalButton`: nhấn mạnh vừa phải
- `ElevatedButton`: nút có độ nổi (elevation)
- `OutlinedButton`: nút viền
- `TextButton`: nút chữ, ít nhấn mạnh

Ví dụ tổng hợp:

```kotlin
Column(verticalArrangement = Arrangement.spacedBy(8.dp)) {
    Button(onClick = {}) { Text("Button") }
    FilledTonalButton(onClick = {}) { Text("FilledTonalButton") }
    ElevatedButton(onClick = {}) { Text("ElevatedButton") }
    OutlinedButton(onClick = {}) { Text("OutlinedButton") }
    TextButton(onClick = {}) { Text("TextButton") }
}
```

### 8.1 Cách chọn nhanh

- Hành động quan trọng nhất màn hình: `Button`
- Hành động phụ nhưng vẫn muốn nổi: `FilledTonalButton` hoặc `ElevatedButton`
- Hành động phụ/ít nổi bật: `OutlinedButton` hoặc `TextButton`

## 9) Text Fields

Project đang dùng `TextField` với state qua `remember`:

```kotlin
var text by remember { mutableStateOf(TextFieldValue()) }
TextField(
    value = text,
    onValueChange = { text = it }
)
```

### 9.1 Dạng đơn giản hơn cho người mới

```kotlin
var name by remember { mutableStateOf("") }
TextField(
    value = name,
    onValueChange = { name = it },
    label = { Text("Tên của bạn") },
    placeholder = { Text("Nhập tên...") },
    singleLine = true
)
```

### 9.2 Khi nào dùng `String` vs `TextFieldValue`?

- Dùng `String` khi chỉ cần text thuần.
- Dùng `TextFieldValue` khi cần thêm cursor, selection, composition.

## 10) CheckBox

`Checkbox` dùng cho lựa chọn bật/tắt độc lập (có thể chọn nhiều mục cùng lúc).

```kotlin
var isChecked by remember { mutableStateOf(false) }

Row(verticalAlignment = Alignment.CenterVertically) {
    Checkbox(
        checked = isChecked,
        onCheckedChange = { isChecked = it }
    )
    Text("Đồng ý điều khoản")
}
```

### 10.1 Lưu ý nhanh

- Dùng `Checkbox` cho multi-select.
- Nếu cần mô tả chi tiết, đặt `Checkbox` + `Text` trong `Row`.
- Có thể dùng `TriStateCheckbox` khi cần trạng thái `On/Off/Indeterminate`.

## 11) Switch

`Switch` phù hợp cho thiết lập bật/tắt ngay lập tức (ví dụ: thông báo, dark mode).

```kotlin
var notificationsEnabled by remember { mutableStateOf(true) }

Row(verticalAlignment = Alignment.CenterVertically) {
    Text("Bật thông báo", modifier = Modifier.weight(1f))
    Switch(
        checked = notificationsEnabled,
        onCheckedChange = { notificationsEnabled = it }
    )
}
```

### 11.1 Khi nào chọn `Switch` thay vì `Checkbox`?

- `Switch`: hành động bật/tắt một setting.
- `Checkbox`: chọn mục trong danh sách (có thể nhiều mục).

## 12) Radio Button

`RadioButton` dùng khi người dùng chỉ được chọn một trong nhiều lựa chọn.

```kotlin
val options = listOf("Nam", "Nữ", "Khác")
var selectedOption by remember { mutableStateOf(options.first()) }

Column {
    options.forEach { option ->
        Row(verticalAlignment = Alignment.CenterVertically) {
            RadioButton(
                selected = selectedOption == option,
                onClick = { selectedOption = option }
            )
            Text(option)
        }
    }
}
```

### 12.1 Lưu ý nhanh

- Các `RadioButton` nên được nhóm theo cùng một state `selectedOption`.
- Nên cho phép click cả dòng (`Row`) để UX tốt hơn, không chỉ click vào nút tròn.

## 13) Progress Indicators

Material 3 có 2 dạng chính:

- `LinearProgressIndicator`: thanh tiến trình ngang.
- `CircularProgressIndicator`: vòng tròn tiến trình.

### 13.1 Indeterminate (không biết chính xác %)

```kotlin
LinearProgressIndicator(modifier = Modifier.fillMaxWidth())
CircularProgressIndicator()
```

### 13.2 Determinate (biết rõ %)

```kotlin
val progress = 0.65f

LinearProgressIndicator(
    progress = { progress },
    modifier = Modifier.fillMaxWidth()
)
CircularProgressIndicator(progress = { progress })
```

### 13.3 Lưu ý UX

- Chỉ hiển thị progress khi đang tải/xử lý thật.
- Nếu thao tác nhanh (< 300ms), cân nhắc không hiện spinner để tránh nhấp nháy.
- Với tiến trình dài, nên kèm `Text("65%")` để người dùng dễ theo dõi.

## 14) Coding Challenge (thực hành)

### Yêu cầu

Tạo màn hình `ProfileCardScreen` dùng tất cả các mục đã học:

- `Text`: tiêu đề + mô tả
- `Layouts`: `Column`, `Row`, `Box`
- `Paddings`: căn khoảng cách hợp lý
- `Image`: avatar từ drawable
- `Buttons`: ít nhất 3 loại nút
- `TextField`: nhập tên người dùng
- `Checkbox`: đồng ý điều khoản
- `Switch`: bật/tắt thông báo
- `RadioButton`: chọn giới tính
- `Progress Indicators`: hiển thị trạng thái lưu dữ liệu

### Gợi ý kỹ thuật

- Dùng `Scaffold` làm khung màn hình.
- Bọc nội dung trong `Column(modifier = Modifier.fillMaxSize().padding(16.dp))`.
- Dùng `Spacer` để tách khối thay cho margin.
- Quản lý state với `remember` + `mutableStateOf`.

### Mở rộng nâng cao

- Validate input (không cho rỗng).
- Disable button khi input chưa hợp lệ.
- Tách UI thành composable nhỏ: `HeaderSection`, `AvatarSection`, `ActionButtons`.
- Viết `@Preview` cho từng composable để phát triển nhanh hơn.

## 15) Tổng kết

Bạn đã đi qua các composable quan trọng nhất cho người mới:

- `Text`
- `Layouts`
- `Paddings & Margins` (mô phỏng margin)
- `Image`
- `Button` + các biến thể
- `TextField`
- `Checkbox`
- `Switch`
- `RadioButton`
- `Progress Indicators`

Nếu nắm vững các phần này, bạn đã có nền tảng tốt để học tiếp:

- `LazyColumn/LazyRow` (danh sách)
- `State hoisting`
- `Navigation Compose`
- `ViewModel + UI state` trong kiến trúc thực tế.
